console.log("'Allo 'Allo!"),$(function(){PARTICLES.init()});var PARTICLES=function($){var settings={},gui=null,img=null,cv=null,ctx=null,particles=null,camera=null,scene=null,windowX=null,windowY=null,windowHalfX=null,windowHalfY=null,mouseX=null,mouseY=null,geometry=null,renderer=null,stats=null,raycaster=null,resetMe=!1,me=null,particle=null,texture=null,extrudeSettings=null,pointLight=null,particleList=[],places={data:[["ny",1470,1860],["miami",1130,2510],["newmexico",220,2510],["ca",-439,2081],["chicago",796,1864],["city",861,2038],["city",211,1561]]},colors={data:["#1861b3","#6897cd","#b331bb"]},init=function(){settings={number:100,perspective:500,particleDepth:20,speedMax:11,speedMin:9.5,scaleMax:2,scaleMin:.5,particleDelay:5,width:screen.width,height:screen.height,shape:0,rotation:2,vertices:4,spread:0,renderer:0,cameramove:!1,cameramove:!1,reset:reset,color:"#1861b3",angle:0,lightZ:15300,targetActive:!1,targetX:400,targetY:400,camx:0,camy:0,camPercentY:0,camPercentX:0},windowX=window.innerWidth,windowY=window.innerHeight,windowHalfX=windowX/2,windowHalfY=windowY/2,document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),window.addEventListener("resize",onWindowResize,!1),gui=new dat.GUI,gui.add(settings,"particleDepth").min(0).max(400).step(10).onFinishChange(reset),gui.add(settings,"perspective").min(0).max(9e4).step(500).onChange(function(){$("body").css("perspective",settings.perspective+"px"),reset()}),gui.add(settings,"particleDelay").min(0).max(30).step(.5).onFinishChange(reset),gui.add(settings,"cameramove"),gui.add(settings,"camx").listen(),gui.add(settings,"camy").listen(),gui.addColor(settings,"color").onChange(function(){$(".particle_color").css("background-color",settings.color),reset()}),gui.add(settings,"scaleMax").min(0).max(10).step(.25).onFinishChange(reset),gui.add(settings,"scaleMin").min(0).max(20).step(.25).onFinishChange(reset),gui.add(settings,"speedMax").min(0).max(20).step(.5).onFinishChange(reset),gui.add(settings,"speedMin").min(0).max(20).step(.5).onFinishChange(reset),gui.add(settings,"number").min(0).max(500).step(1).onFinishChange(reset),gui.add(settings,"spread").min(0).max(4e4).step(1).onFinishChange(reset),gui.add(settings,"width"),gui.add(settings,"height"),gui.add(settings,"camPercentX").listen(),gui.add(settings,"camPercentY").listen(),gui.add(settings,"shape",{circle:0,heart:1,hexagon:2}),gui.add(settings,"rotation",0,10).onChange(reset),gui.add(settings,"targetActive").onChange(reset),gui.add(settings,"targetX").min(-2e3).max(4e3).step(1).onFinishChange(reset),gui.add(settings,"targetY").min(0).max(4e3).step(1).onFinishChange(reset),gui.add(settings,"vertices",2,10).step(1),gui.add(settings,"angle").listen(),gui.add(settings,"reset"),stats=new Stats,stats.domElement.style.position="absolute",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement),createParticles(),animate()},reset=function(){removeParticles(),createParticles(),$(".particle_color").css("background-color",settings.color)},getColor=function(){var hex=colorObj.getHexString(),newcolor="0x"+hex;return eval(newcolor)},createParticles=function(){particles=document.createElement("div"),particles.id="particles",document.body.appendChild(particles);for(var a=0;a<settings.number;a++){$("#particles").append('<div id="part'+a+'" class="hex1 hexagon-wrapper"><div class="particle_color hexagon"></div></div>'),particleList.push(particle);var b=document.getElementById("part"+a);initParticle(b)}},initParticle=function(a){var b=Math.round(settings.width-Math.random()*settings.width),c=Math.round(settings.height/4-Math.random()*settings.height/4),d=Math.round(Math.random()*settings.particleDepth+100),e=360*Math.round(1*Math.random()),f=360*Math.round(1*Math.random()),g=360*Math.round(1*Math.random()),h=Math.random()*(settings.scaleMax-settings.scaleMin)+settings.scaleMin,i=Math.random()*(settings.speedMax-settings.speedMin)+settings.speedMin,j=Math.random()*settings.particleDelay,k=Math.floor(Math.random()*places.data.length),l=places.data[k][1],m=places.data[k][2],n=.01*Math.round(100*Math.random());console.log(n),TweenLite.set(a,{rotationZ:e,rotationX:f,rotationY:g,scaleX:h,scaleY:h,x:b,y:c,z:d,opacity:n}),settings.targetActive?TweenLite.to(a,i,{x:settings.targetX,y:settings.targetY,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,z:-1e3,delay:j,transformOrigin:"left 50% -5"}):TweenLite.to(a,i,{x:l,y:m,scaleX:1,scaleY:1,rotationX:0,rotationY:0,rotationZ:0,z:-1e3,delay:j,transformOrigin:"left 50% -5"})},removeParticles=function(){console.log("PARTICLES.removeParticles called");for(var a=particleList.length,b=0;a>b;b++)$("#part"+b).remove();particleList=[]},update=function(){},onDocumentMouseMove=function(a){mouseX=a.clientX,mouseY=a.clientY},onDocumentTouchStart=function(a){1==a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)},onDocumentTouchMove=function(a){1==a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)},onWindowResize=function(){windowX=window.innerWidth,windowY=window.innerHeight,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2},animate=function(){1==resetMe?resetMe=!1:(requestAnimationFrame(animate),render(),stats.update())},render=function(){settings.angle=(settings.angle+1)%360,TWEEN.update(),settings.cameramove&&(settings.camx+=.05*(mouseX-settings.camx),settings.camy+=.05*(-mouseY-settings.camy),settings.camPercentX=100*mouseX/windowX,settings.camPercentY=100*mouseY/windowY)};return{init:init}}(jQuery);